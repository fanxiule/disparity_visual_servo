<launch>
    <arg name="urdf_file" default="$(find xacro)/xacro '$(find d435_gazebo_plugin)/urdf/camera_ground.urdf.xacro'" />
    <arg name="open_rviz" default="true" />
    <arg name="rviz_config" default="$(find d435_gazebo_plugin)/rviz/camera_ground.rviz" />

    <!-- Load URDF -->
    <param name="robot_description" command="$(arg urdf_file)" />

    <!-- Load Gazebo -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch"></include>
    <node name="spawn_model" pkg="gazebo_ros" type="spawn_model" args="-urdf -param robot_description -model d435" />
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" />

    <!-- Load Rviz -->
    <group if="$(arg open_rviz)">
        <node pkg="rviz" type="rviz" name="rviz" required="true" args="-d $(arg rviz_config)" />
    </group>
</launch>